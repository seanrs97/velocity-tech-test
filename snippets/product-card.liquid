{% doc %}
  This snippet is used to render a product card.

  It is included in the following sections
  - main-collection.liquid

  @param {object} product - The product object
  @param {object} section_settings - The settings object from the parent section
{% enddoc %}

{% liquid 

  assign show_box_shadow = section_settings.show_box_shadow

  comment
    If these tags exist on the product, show the corresponding badge
  endcomment
  if product.tags contains 'new'
    assign show_new_badge = true
  endif
  comment
    Default to true for demo purposes
  endcomment
  assign show_new_badge = true

  if product.tags contains 'promotion'
    assign show_promotion_badge = true
  endif
  comment
    Default to true for demo purposes
  endcomment
  assign show_promotion_badge = true

  comment
    this logic would usually be determined by the app used for the wishlist such as wishlist hero.
    This is usually determined by a tag, metafield or setting. I've used a tag for demo purposes.
    In reality, a snippet would likely be rendered in place of the heart icon. This would be connected to the app and allow users to add the product to the list generated by the app.
  endcomment
  if product.tags contains 'wishlist'
    assign enable_wishlist = true
  endif
  comment
    Default to true for demo purposes
  endcomment
  assign enable_wishlist = true

  assign default_variant = product.selected_or_first_available_variant
  assign default_variant_title = default_variant.title | downcase

  unless default_variant_title == 'default title' or default_variant_title == ''
    assign show_variant_title = true
  endunless

%}
<div class="product-tile" {% if show_box_shadow %} style="box-shadow: 0px 0px 15px -2px #0000001A;" {% endif %}>
  <div class="product-tile--header">
    {% comment %} product badges {% endcomment %}
    {% if show_new_badge or show_promotion_badge %}
      <div class="product-tile--badges">
        {% if show_new_badge %}
          {% render 'badge', text: 'New', icon: 'trophy', color: '#B2DAE0', class: 'product-tile--badge' %}
        {% endif %}

        {% if show_promotion_badge %}
          {% render 'badge', text: 'Get X for Y', icon: 'label', color: '#FACDCE', class: 'product-tile--badge' %}
        {% endif %}
      </div>
    {% endif %}
    {% comment %} product wishlist {% endcomment %}
    {% if enable_wishlist %}
      <span class="product-tile--wishlist">
        {% render 'icons', icon: 'heart' %}
      </span>
    {% endif %}
  </div>
  {% comment %} product featured image {% endcomment %}
  {% if product.featured_image %}
    <a href="{{ product.url }}" class="product-tile--image-link">
      {% render 'image', image: product.featured_image, class: 'product-tile--featured-image' %}
    </a>
  {% endif %}
  {% comment %} product title {% endcomment %}
  <a href="{{ product.url }}" class="product-tile--title-link">
    <h2 class="product-tile--title">{{ product.title }}</h2>
  </a>
  {% comment %} default variant {% endcomment %}
  {% if show_variant_title == true %}
    <span class="product-tile--variant-title">{{ default_variant.title }}</span>
  {% endif %}
  {% comment %} quantity selector / product price {% endcomment %}
  <div class="product-tile--footer">
    {% comment %} quantity selector {% endcomment %}
    {% render 'quantity', class: 'product-tile--quantity' %}
    {% comment %} price {% endcomment %}
    {% render 'price', product: default_variant, class: 'product-tile--price' %}
  </div>
</div>
